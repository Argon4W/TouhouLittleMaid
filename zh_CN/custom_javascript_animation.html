<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>自定义 JavaScript 动画 | Touhou Little Maid 开发 Wiki</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="有关于车万女仆的开发文档">
    
    <link rel="preload" href="/TouhouLittleMaid/assets/css/0.styles.c3e38df3.css" as="style"><link rel="preload" href="/TouhouLittleMaid/assets/js/app.dac57fa6.js" as="script"><link rel="preload" href="/TouhouLittleMaid/assets/js/2.670a8c78.js" as="script"><link rel="preload" href="/TouhouLittleMaid/assets/js/1.71926bfe.js" as="script"><link rel="preload" href="/TouhouLittleMaid/assets/js/116.58b78700.js" as="script"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/10.66b9053d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/100.0b786e36.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/101.23bdac5e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/102.65b28283.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/103.045bc9e5.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/104.e55a0ba6.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/105.d985aea4.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/106.b2a9dbbc.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/107.21aec799.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/108.3e5f6667.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/109.aa17b6e0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/11.04545941.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/110.5ac0ff71.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/111.509436c8.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/112.0edfc2c5.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/113.56ef8e36.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/114.684e9d18.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/115.65c46f15.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/117.947ac0a0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/118.03b91fa1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/119.b56e5cdb.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/12.1bdea263.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/13.9426da25.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/14.856c1518.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/15.b360c35b.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/16.e925b239.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/17.5b873df7.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/18.4c170722.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/19.a45744ea.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/20.e4646aa0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/21.a45f0526.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/22.3ff55b4a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/23.99ed667d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/24.6b095fd9.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/25.490b3619.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/26.c66279e1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/27.80fcc2b0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/28.97ea477e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/29.4f7bf53e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/3.4db2e19a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/30.5d61d45b.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/31.dd8f3b88.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/32.b162cc61.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/33.41dcbdba.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/34.f2e185b0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/35.3528ff62.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/36.1eb6578a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/37.70f8ab20.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/38.bb35bfdc.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/39.3e3c3220.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/4.45665f8a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/40.15b4ff71.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/41.e509f5e7.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/42.1cdcab74.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/43.24e7e3f9.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/44.7da90e03.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/45.0fb5f105.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/46.0a5ddb56.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/47.317d9503.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/48.042bb211.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/49.39fd0edb.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/5.b31b942f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/50.c0fd596e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/51.36390cbe.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/52.af7ecf2d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/53.2f84e5f0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/54.ec6bde73.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/55.59aac4a4.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/56.6984cab6.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/57.ede97446.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/58.090812c6.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/59.73e8caa6.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/6.4910e764.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/60.d0c26273.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/61.47ee6729.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/62.01aa7e3b.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/63.44525ec5.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/64.ad2add71.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/65.bdd101ab.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/66.bc457298.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/67.87102fa9.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/68.167b93ad.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/69.cf5a222b.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/7.c5640ac7.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/70.48c7478f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/71.f341bc6b.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/72.2d76a534.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/73.a775942d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/74.a6386e20.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/75.e38df8cf.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/76.96d3d61a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/77.0f8f30dd.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/78.102306b8.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/79.79e5d8ff.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/80.2ed1197f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/81.9954020a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/82.280cc9fe.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/83.d6ffe29a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/84.4004d0d2.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/85.afe7ae38.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/86.426916a7.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/87.cd9afc3f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/88.4ee49d88.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/89.890cc443.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/90.62fd2ea5.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/91.e40add09.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/92.772dd897.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/93.1cb6ef87.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/94.bdddfe93.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/95.3a57acf9.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/96.12987b81.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/97.6c6bbf20.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/98.010ee787.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/99.16f8d244.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/TouhouLittleMaid/assets/css/0.styles.c3e38df3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TouhouLittleMaid/zh_CN/" class="home-link router-link-active"><!----> <span class="site-name">Touhou Little Maid 开发 Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/TouhouLittleMaid/zh_CN/" class="nav-link router-link-active">
  主页
</a></div><div class="nav-item"><a href="https://github.com/TartaricAcid/TouhouLittleMaid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.curseforge.com/minecraft/mc-mods/touhou-little-maid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CurseForge
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/custom_javascript_animation.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/es_ES/custom_javascript_animation.html" class="nav-link">
  es-ES
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ja_JP/custom_javascript_animation.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/pt_BR/custom_javascript_animation.html" class="nav-link">
  Português (Brasil)
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html" class="nav-link">
  Русский
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/tr_TR/custom_javascript_animation.html" class="nav-link">
  İngilizce
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/vi_VN/custom_javascript_animation.html" class="nav-link">
  Tiếng Việt
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/TouhouLittleMaid/zh_CN/" class="nav-link router-link-active">
  主页
</a></div><div class="nav-item"><a href="https://github.com/TartaricAcid/TouhouLittleMaid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.curseforge.com/minecraft/mc-mods/touhou-little-maid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CurseForge
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/custom_javascript_animation.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/es_ES/custom_javascript_animation.html" class="nav-link">
  es-ES
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ja_JP/custom_javascript_animation.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/pt_BR/custom_javascript_animation.html" class="nav-link">
  Português (Brasil)
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html" class="nav-link">
  Русский
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/tr_TR/custom_javascript_animation.html" class="nav-link">
  İngilizce
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/vi_VN/custom_javascript_animation.html" class="nav-link">
  Tiếng Việt
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>自定义模型</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TouhouLittleMaid/zh_CN/custom_model_pack.html" class="sidebar-link">自定义模型包</a></li><li><a href="/TouhouLittleMaid/zh_CN/maid_model_pack_details.html" class="sidebar-link">女仆模型包详解</a></li><li><a href="/TouhouLittleMaid/zh_CN/chair_model_pack_details.html" class="sidebar-link">坐垫模型包详解</a></li><li><a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html" aria-current="page" class="active sidebar-link">自定义动画脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html#基本格式" class="sidebar-link">基本格式</a></li><li class="sidebar-sub-header"><a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html#游戏内热重载功能" class="sidebar-link">游戏内热重载功能</a></li><li class="sidebar-sub-header"><a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html#函数文档" class="sidebar-link">函数文档</a></li></ul></li><li><a href="/TouhouLittleMaid/zh_CN/preset_animation.html" class="sidebar-link">预设动画</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>合成修改</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="自定义-javascript-动画"><a href="#自定义-javascript-动画" class="header-anchor">#</a> 自定义 JavaScript 动画</h1> <p>通过 JavaScript 文件，你可以为女仆或坐垫添加自定义动画。</p> <ul><li>本 wiki 适用于 Touhou Little Maid 模组 <code>1.12.2</code> 和 <code>1.16.5</code> 版本；</li> <li>需要对 JavaScript 基本语法有简单的了解；</li> <li>需要高中及以上数学知识，尤其是对三角函数和极坐标的理解。</li> <li>文本编辑软件推荐 VSCode，相关文本文件均需要用 UTF-8 无 BOM 编码进行存储。</li></ul> <h2 id="基本格式"><a href="#基本格式" class="header-anchor">#</a> 基本格式</h2> <p>动画脚本放置在文件夹任意位置均可，只需要在对应模型字段处声明动画文件位置即可。 我建议将它放入 <code>animation</code> 文件夹中。</p> <p>下面是通用模板：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 当你需要使用 GlWrapper 时才需要声明这一段代码</span>
<span class="token keyword">var</span> GlWrapper <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;com.github.tartaricacid.touhoulittlemaid.client.animation.script.GlWrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Java<span class="token punctuation">.</span><span class="token function">asJSONCompatible</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token comment">/**
     * @param entity 需要应用动画的实体对象
     * @param limbSwing 实体在行走过程中的速度（可以理解为汽车的速度表）
     * @param limbSwingAmount 实体行走的总里程数（可以理解为汽车的里程表）
     * @param ageInTicks 实体的 tick 时间，一个从 0 开始一直增加的数值
     * @param netHeadYaw 实体头部的偏航
     * @param headPitch 实体头部的俯仰
     * @param scale 实体缩放参数，默认为 0.0625，未发现任何使用的地方
     * @param modelMap 为一个 map，存储了该模型所有的骨骼
     */</span>
    <span class="token function-variable function">animation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> limbSwing<span class="token punctuation">,</span> limbSwingAmount<span class="token punctuation">,</span> ageInTicks<span class="token punctuation">,</span> netHeadYaw<span class="token punctuation">,</span>
                          headPitch<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> modelMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 相关动画的书写</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>这里我们举一个简单的例子，当前模型有一个带有名为 <code>rotation</code> 的骨骼，我们想要把让这个骨骼绕着 X 轴持续的做旋转运动，运动的速度大约为每 tick 1 度（也就是 18 秒转一圈），我们可以这样写动画。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 当你需要使用 GlWrapper 时才需要声明这一段代码</span>
<span class="token keyword">var</span> GlWrapper <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;com.github.tartaricacid.touhoulittlemaid.client.animation.script.GlWrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Java<span class="token punctuation">.</span><span class="token function">asJSONCompatible</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">animation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> limbSwing<span class="token punctuation">,</span> limbSwingAmount<span class="token punctuation">,</span> ageInTicks<span class="token punctuation">,</span> netHeadYaw<span class="token punctuation">,</span>
                          headPitch<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> modelMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 先从 modelMap 中尝试获取名为 rotation 的骨骼</span>
        rotation <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;rotation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 以防万一，我们做个简单的判定，确保此骨骼一定存在</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rotation <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 通过骨骼的 setRotateAngleX 函数设置其 X 轴角度</span>
            <span class="token comment">// ageInTicks 为实体的 tick 时间，一个从 0 开始一直增加的数值</span>
            <span class="token comment">// 通过取余运算（也就是 % 符号）将这个数限定在 0~360 之间</span>
            <span class="token comment">// 因为该方法只接收弧度值，所以需要乘以 0.017453292 转换成对应弧度</span>
            <span class="token comment">// 这样我们就实现了每 tick 旋转 1 度的动画</span>
            rotation<span class="token punctuation">.</span><span class="token function">setRotateAngleX</span><span class="token punctuation">(</span>ageInTicks <span class="token operator">%</span> <span class="token number">360</span> <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>现在我们再进行一个更加复杂的运动，我们有一个名为 <code>wing</code> 的骨骼，我们想要其能够持续的来回摆动。</p> <p>摆动围绕 Y 轴，摆动角度在 <code>-20°~40°</code> 之间，每 5 秒做一次完整的往复运动。</p> <p>这一块恰好需要用到高中所学的三角函数知识，这一块选取正弦或者余弦均可，我们使用正弦函数。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 当你需要使用 GlWrapper 时才需要声明这一段代码</span>
<span class="token keyword">var</span> GlWrapper <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;com.github.tartaricacid.touhoulittlemaid.client.animation.script.GlWrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Java<span class="token punctuation">.</span><span class="token function">asJSONCompatible</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">animation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> limbSwing<span class="token punctuation">,</span> limbSwingAmount<span class="token punctuation">,</span> ageInTicks<span class="token punctuation">,</span> netHeadYaw<span class="token punctuation">,</span>
        headPitch<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> modelMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 先从 modelMap 中尝试获取名为 wing 的骨骼</span>
        wing <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;wing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 以防万一，我们做个简单的判定，确保此骨骼一定存在</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>wing <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 每 5 秒完整的往复一次，也就是 100 tick</span>
            <span class="token comment">// 通过乘法和求余来实现这个功能</span>
            <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token punctuation">(</span>ageInTicks <span class="token operator">*</span> <span class="token number">3.6</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">360</span><span class="token punctuation">;</span>
            <span class="token comment">// 这一块调用了 JavaScript 的 Math 函数</span>
            <span class="token comment">// 构建正弦函数，获得数值为 -20~40 的周期函数</span>
            <span class="token keyword">var</span> func <span class="token operator">=</span> <span class="token number">30</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>time <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token comment">// 最后进行参数的应用</span>
            wing<span class="token punctuation">.</span><span class="token function">setRotateAngleY</span><span class="token punctuation">(</span>func <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>其他复杂的运动均可通过相关函数来实现。</p> <h2 id="游戏内热重载功能"><a href="#游戏内热重载功能" class="header-anchor">#</a> 游戏内热重载功能</h2> <p>因为干巴巴的函数式并不能确定该动画是否表现正确，我们添加了游戏内的动画热重载功能。</p> <p>加载模型资源包后，只需使用以下命令即可重新加载所有动画数据。</p> <ul><li>1.12.2: <code>/maid_res reload</code></li> <li>1.16.5: <code>/tlm pack reload</code></li></ul> <h2 id="函数文档"><a href="#函数文档" class="header-anchor">#</a> 函数文档</h2> <p>删除线样式的表示此函数已在 1.16 中被废弃，你可以访问<a href="https://github.com/TartaricAcid/TouhouLittleMaid/tree/1.16.5/src/main/java/com/github/tartaricacid/touhoulittlemaid/api/animation" target="_blank" rel="noopener noreferrer">此处连接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看源码 API。</p> <h3 id="实体参数"><a href="#实体参数" class="header-anchor">#</a> 实体参数</h3> <p>依据附加动画的对象不同，<code>entity</code> 参数可用的函数也不相同。</p> <h4 id="女仆"><a href="#女仆" class="header-anchor">#</a> 女仆</h4> <table><thead><tr><th style="text-align:center;">函数名</th> <th style="text-align:center;">返回值</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>hasHelmet()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆穿戴头盔后，返回 <code>true</code></td></tr> <tr><td style="text-align:center;"><code>hasChestPlate()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆穿戴胸甲后，返回 <code>true</code></td></tr> <tr><td style="text-align:center;"><code>hasLeggings()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆穿戴护腿后，返回 <code>true</code></td></tr> <tr><td style="text-align:center;"><code>hasBoots()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆穿戴靴子后，返回 <code>true</code></td></tr> <tr><td style="text-align:center;"><code>getHelmet()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">当女仆佩戴头盔后，返回头盔物品的注册名称。</td></tr> <tr><td style="text-align:center;"><code>getChestPlate()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">当女仆佩戴胸甲后，返回胸甲物品的注册名称。</td></tr> <tr><td style="text-align:center;"><code>getLeggings()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">当女仆佩戴护腿后，返回护腿物品的注册名称。</td></tr> <tr><td style="text-align:center;"><code>getBoots()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">当女仆佩戴靴子后，返回头盔物品的注册名称。</td></tr> <tr><td style="text-align:center;"><code>isBegging()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否处于祈求模式</td></tr> <tr><td style="text-align:center;"><code>isSwingingArms()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">如果女仆处于抬手状态，返回 <code>true</code></td></tr> <tr><td style="text-align:center;"><code>getSwingProgress()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取女仆抬手的时间</td></tr> <tr><td style="text-align:center;"><code>isRiding()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否处于骑乘模式</td></tr> <tr><td style="text-align:center;"><code>isSitting()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否处于待命模式</td></tr> <tr><td style="text-align:center;"><s><code>isHoldTrolley()</code></s></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否携带手推车或其他实体。</td></tr> <tr><td style="text-align:center;"><s><code>isRidingMarisaBroom()</code></s></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否骑着扫帚</td></tr> <tr><td style="text-align:center;"><s><code>isRidingPlayer()</code></s></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否骑着玩家</td></tr> <tr><td style="text-align:center;"><s><code>isHoldVehicle()</code></s></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否骑乘载具</td></tr> <tr><td style="text-align:center;"><s><code>isPortableAudioPlay()</code></s></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否持有便携音箱并处于播放状态</td></tr> <tr><td style="text-align:center;"><code>hasBackpack()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否穿戴背包</td></tr> <tr><td style="text-align:center;"><code>getBackpackLevel()</code></td> <td style="text-align:center;"><code>int</code></td> <td style="text-align:center;">获取女仆的的背包等级</td></tr> <tr><td style="text-align:center;"><s><code>hasSasimono()</code></s></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否穿戴旗指物</td></tr> <tr><td style="text-align:center;"><code>isSwingLeftHand()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否使用主手或副手，如果是主手，返回 <code>false</code></td></tr> <tr><td style="text-align:center;"><s><code>getLeftHandRotation()</code></s></td> <td style="text-align:center;"><code>float[3]</code></td> <td style="text-align:center;">获取主手旋转数据</td></tr> <tr><td style="text-align:center;"><s><code>getRightHandRotation()</code></s></td> <td style="text-align:center;"><code>float[3]</code></td> <td style="text-align:center;">获取副手旋转数据</td></tr> <tr><td style="text-align:center;"><s><code>getDim()</code></s></td> <td style="text-align:center;"><code>int</code></td> <td style="text-align:center;">获取女仆所处维度</td></tr> <tr><td style="text-align:center;"><code>getWorld()</code></td> <td style="text-align:center;"><code>World</code></td> <td style="text-align:center;">获取女仆的世界数据</td></tr> <tr><td style="text-align:center;"><code>getTask()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">获取女仆的工作模式，比如<code>attack</code>，<code>ranged_attack</code></td></tr> <tr><td style="text-align:center;"><code>hasItemMainhand()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">是否女仆主手持有物品</td></tr> <tr><td style="text-align:center;"><code>hasItemOffhand()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">是否女仆副手持有物品</td></tr> <tr><td style="text-align:center;"><code>getItemMainhand()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">获取女仆主手物品注册名</td></tr> <tr><td style="text-align:center;"><code>getItemOffhand()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">获取女仆副手物品注册名</td></tr> <tr><td style="text-align:center;"><code>inWater()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否在水中</td></tr> <tr><td style="text-align:center;"><code>inRain()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否在雨中</td></tr> <tr><td style="text-align:center;"><code>getAtBiome()</code></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">获取女仆的生物群系注册名</td></tr> <tr><td style="text-align:center;"><s><code>getAtBiomeTemp()</code></s></td> <td style="text-align:center;"><code>String</code></td> <td style="text-align:center;">获取女仆的生物群系温度类型</td></tr> <tr><td style="text-align:center;"><code>onHurt()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否受到伤害</td></tr> <tr><td style="text-align:center;"><code>getHealth()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取女仆的生命值</td></tr> <tr><td style="text-align:center;"><code>getMaxHealth()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取女仆的最大生命值</td></tr> <tr><td style="text-align:center;"><code>isSleep()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否在睡觉</td></tr> <tr><td style="text-align:center;"><code>getFavorability()</code></td> <td style="text-align:center;"><code>int</code></td> <td style="text-align:center;">获取女仆的好感度</td></tr> <tr><td style="text-align:center;"><code>isOnGround()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">女仆是否在地面</td></tr> <tr><td style="text-align:center;"><code>getArmorValue()</code></td> <td style="text-align:center;"><code>double</code></td> <td style="text-align:center;">女仆的护甲值</td></tr> <tr><td style="text-align:center;"><code>getSeed()</code></td> <td style="text-align:center;"><code>long</code></td> <td style="text-align:center;">获取一个固定值，每个实体都是不同的，类似于该实体的 UUID</td></tr></tbody></table> <h4 id="坐垫"><a href="#坐垫" class="header-anchor">#</a> 坐垫</h4> <table><thead><tr><th style="text-align:center;">函数名</th> <th style="text-align:center;">返回值</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>isRidingPlayer()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">坐垫是否被玩家所坐</td></tr> <tr><td style="text-align:center;"><code>hasPassenger()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">坐垫是否有乘客</td></tr> <tr><td style="text-align:center;"><code>getPassengerYaw()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取坐垫上乘客的 yaw</td></tr> <tr><td style="text-align:center;"><code>getYaw()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取坐垫的 yaw</td></tr> <tr><td style="text-align:center;"><code>getPassengerPitch()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取坐垫上乘客的 pitch</td></tr> <tr><td style="text-align:center;"><s><code>getDim()</code></s></td> <td style="text-align:center;"><code>int</code></td> <td style="text-align:center;">获取坐垫的维度 ID</td></tr> <tr><td style="text-align:center;"><code>getWorld()</code></td> <td style="text-align:center;"><code>World</code></td> <td style="text-align:center;">获取坐垫的世界数据</td></tr> <tr><td style="text-align:center;"><code>getSeed()</code></td> <td style="text-align:center;"><code>long</code></td> <td style="text-align:center;">获取一个固定值，每个实体都是不同的，类似于该实体的 UUID</td></tr></tbody></table> <h4 id="世界"><a href="#世界" class="header-anchor">#</a> 世界</h4> <table><thead><tr><th style="text-align:center;">函数名</th> <th style="text-align:center;">返回值</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>getWorldTime()</code></td> <td style="text-align:center;"><code>long</code></td> <td style="text-align:center;">获取当前世界的时间（tick，0-24000）</td></tr> <tr><td style="text-align:center;"><code>isDay()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">当前世界是否为白天</td></tr> <tr><td style="text-align:center;"><code>isNight()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">当前世界是否为黑夜</td></tr> <tr><td style="text-align:center;"><code>isRaining()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">当前世界是否在降雨</td></tr> <tr><td style="text-align:center;"><code>isThundering()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">当前世界是否处于雷雨中</td></tr></tbody></table> <h3 id="limbswing-和-limbswingamount-参数"><a href="#limbswing-和-limbswingamount-参数" class="header-anchor">#</a> <code>limbSwing</code> 和 <code>limbSwingAmount</code> 参数</h3> <p>这些都是浮点数，<code>limbSwing</code>是实体的行走速度（可以将其视为汽车的速度计），<code>limbSwingAmount</code>是实体的总行走距离（可以将其视为汽车的里程表）。</p> <p>这两个数据主要用于腿部和肢体的旋转，Minecraft原版使用这两个基本数据来计算手臂和腿部摆动的动画。</p> <p><code>Math.cos(limbSwing * 0.6662) * limbSwingAmount</code>（左手）</p> <p><code>-Math.cos(limbSwing * 0.6662) * limbSwingAmount</code>（右手）</p> <p><code>Math.cos(limbSwing * 0.6662) * limbSwingAmount * 1.4</code>（左腿）</p> <p><code>-Math.cos(limbSwing * 0.6662) * limbSwingAmount * 1.4</code>（右腿）</p> <p>改变数值<code>0.6662</code>可以控制摆动的频率，乘以系数 (例如，腿部使用<code>1.4</code>作为系数) 来改变摆动的幅度。</p> <p>使用原版Minecraft的手臂和腿摆动公式可以使摆动动画更加自然。</p> <h3 id="ageinticks-参数"><a href="#ageinticks-参数" class="header-anchor">#</a> <code>ageInTicks</code> 参数</h3> <p>浮点数，一个从 0 开始每 tick 都会自加的变量，大多数动画中都会用到的自变量。</p> <h3 id="netheadyaw-和-headpitch-参数"><a href="#netheadyaw-和-headpitch-参数" class="header-anchor">#</a> <code>netHeadYaw</code> 和 <code>headPitch</code> 参数</h3> <p>二者均为浮点数，单位为角度（这是原版 Minecraft 所设计的）。</p> <p>通常此参数可以用作旋转角度，你只需要将其更改为弧度。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>head<span class="token punctuation">.</span><span class="token function">setRotateAngleX</span><span class="token punctuation">(</span>headPitch <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
head<span class="token punctuation">.</span><span class="token function">setRotateAngleY</span><span class="token punctuation">(</span>netHeadYaw <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>如果在此部分设置的系数大于'0.017453292'，可能会出现一些错误。</p></blockquote> <h3 id="scale-参数"><a href="#scale-参数" class="header-anchor">#</a> <code>scale</code> 参数</h3> <p>浮点数，固定为 0.0625。</p> <p>一个含义不明的值。</p> <h3 id="modelmap-参数"><a href="#modelmap-参数" class="header-anchor">#</a> modelMap 参数</h3> <p>一个使用字符串作为键的保存组的 Map。</p> <p>您可以通过<code>modelMap.get(&quot;xxx&quot;)</code>获取相应的组。 如果没有与名称匹配的组，返回<code>undefined</code></p> <p>假设我们想获取目标组<code>head</code>：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>head <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后我们可以使用这个<code>head</code>组来设置各种参数，制作动画。</p> <p>当然，为了预防起见，最好对该组进行检查，以确保它存在。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>head <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 制作各种动画</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="组"><a href="#组" class="header-anchor">#</a> 组</h3> <p>我们可以通过<code>modelMap.get(&quot;xxx&quot;)</code>获取各种组，以下是可用于获取到的组的函数列表。</p> <table><thead><tr><th style="text-align:center;">函数名</th> <th style="text-align:center;">返回值</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>setRotateAngleX(float rotateAngleX)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">设置组的 X 轴角度</td></tr> <tr><td style="text-align:center;"><code>setRotateAngleY(float rotateAngleY)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">设置组的 Y 轴角度</td></tr> <tr><td style="text-align:center;"><code>setRotateAngleZ(float rotateAngleZ)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">设置组的 Z 轴角度</td></tr> <tr><td style="text-align:center;"><code>setOffsetX(float offsetX)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">设置组的 X 轴坐标偏移</td></tr> <tr><td style="text-align:center;"><code>setOffsetY(float offsetY)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">设置组的 Y 轴坐标偏移</td></tr> <tr><td style="text-align:center;"><code>setOffsetZ(float offsetZ)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">设置组的 Z 轴坐标偏移</td></tr> <tr><td style="text-align:center;"><code>setHidden(boolean hidden)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">设置组是否隐藏</td></tr> <tr><td style="text-align:center;"><code>getRotateAngleX()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取组的 X 轴角度</td></tr> <tr><td style="text-align:center;"><code>getRotateAngleY()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取组的 Y 轴角度</td></tr> <tr><td style="text-align:center;"><code>getRotateAngleZ()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取组的 Z 轴角度</td></tr> <tr><td style="text-align:center;"><code>getInitRotateAngleX()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取 ModelRenderer 的初始化 X 轴旋转角度</td></tr> <tr><td style="text-align:center;"><code>getInitRotateAngleY()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取 ModelRenderer 的初始化 Y 轴旋转角度</td></tr> <tr><td style="text-align:center;"><code>getInitRotateAngleZ()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取 ModelRenderer 的初始化 Z 轴旋转角度</td></tr> <tr><td style="text-align:center;"><code>getOffsetX()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取组的 X 轴坐标偏移</td></tr> <tr><td style="text-align:center;"><code>getOffsetY()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取组的 Y 轴坐标偏移</td></tr> <tr><td style="text-align:center;"><code>getOffsetZ()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">获取组的 Z 轴坐标偏移</td></tr> <tr><td style="text-align:center;"><code>isHidden()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">检查组是否隐藏</td></tr></tbody></table> <h3 id="glwrapper"><a href="#glwrapper" class="header-anchor">#</a> GlWrapper</h3> <p>在脚本的最开头，我们使用了一个叫做 <code>GlWrapper</code> 的工具，它可以进行各种平移、旋转和缩放操作。</p> <table><thead><tr><th style="text-align:center;">函数名</th> <th style="text-align:center;">返回值</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>translate(float x, float y, float z)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">将实体移动至坐标 x y z</td></tr> <tr><td style="text-align:center;"><code>rotate(float angle, float x, float y, float z)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">以直线 <code>(0, 0, 0) (x, y, z)</code> 为轴，将其旋转 <code>angle</code> 度。</td></tr> <tr><td style="text-align:center;"><code>scale(float x, float y, float z)</code></td> <td style="text-align:center;">无</td> <td style="text-align:center;">将实体在三条轴上缩放 x y z 倍</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TouhouLittleMaid/zh_CN/chair_model_pack_details.html" class="prev">
        坐垫模型包详解
      </a></span> <span class="next"><a href="/TouhouLittleMaid/zh_CN/preset_animation.html">
        预设动画
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TouhouLittleMaid/assets/js/app.dac57fa6.js" defer></script><script src="/TouhouLittleMaid/assets/js/2.670a8c78.js" defer></script><script src="/TouhouLittleMaid/assets/js/1.71926bfe.js" defer></script><script src="/TouhouLittleMaid/assets/js/116.58b78700.js" defer></script>
  </body>
</html>
